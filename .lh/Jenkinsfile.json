{
    "sourceFile": "Jenkinsfile",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1676513610783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1676513842276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     stages { \n         stage ('Build Image') { \n             steps { \n                 script {\n-                    dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n+                   dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n                 }                \n             }\n         }\n \n"
                },
                {
                    "date": 1676513894243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,36 +1,12 @@\n pipeline { \n     agent any  \n \n     stages { \n-        stage ('Build Image') { \n+        stage ('Inicial') { \n             steps { \n-                script {\n-                   dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n-                }                \n+              echo 'Iniciando a pipeline'  \n             }\n         }\n \n-        stage ('Push Image') {\n-            steps {\n-                script {\n-                    docker.withRegistry('https://registry.hub.docker.com', 'dockerhub') {\n-                        dockerapp.push('latest')\n-                        dockerapp.push(\"${env.BUILD_ID}\")\n-                    }\n-                }\n-            }\n-        }\n-\n-        stage ('Deploy Kubernetes') {\n-            environment {\n-                tag_version = \"${env.BUILD_ID}\"\n-            }\n-            steps {\n-                withKubeConfig([credentialsId: 'kubeconfig']) {\n-                    sh 'sed -i \"s/{{tag}}/$tag_version/g\" ./k8s/deployment.yaml'\n-                    sh 'kubectl apply -f ./k8s/deployment.yaml'\n-                }\n-            }\n-        }\n     }\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1676516201420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n pipeline { \n     agent any  \n \n     stages { \n-        stage ('Inicial') { \n+        stage ('Build Image') { \n             steps { \n               echo 'Iniciando a pipeline'  \n             }\n         }\n"
                },
                {
                    "date": 1676516349775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,11 @@\n \n     stages { \n         stage ('Build Image') { \n             steps { \n-              echo 'Iniciando a pipeline'  \n+                 script {\n+                     dockerapp = docker.build(\"rodspt/api-produto\", '-f ./src/Dockerfile ./src')   \n+                 } \n             }\n         }\n \n     }\n"
                },
                {
                    "date": 1676516475884,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,11 +3,11 @@\n \n     stages { \n         stage ('Build Image') { \n             steps { \n-                 script {\n-                     dockerapp = docker.build(\"rodspt/api-produto\", '-f ./src/Dockerfile ./src')   \n-                 } \n+                script {\n+                   dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n+                }                \n             }\n         }\n \n     }\n"
                },
                {
                    "date": 1676516727557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     stages { \n         stage ('Build Image') { \n             steps { \n                 script {\n-                   dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n+                   dockerapp = docker.build(\"rodspt/api-produto:lasted\", '-f ./src/Dockerfile ./src') \n                 }                \n             }\n         }\n \n"
                },
                {
                    "date": 1676516956762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     stages { \n         stage ('Build Image') { \n             steps { \n                 script {\n-                   dockerapp = docker.build(\"rodspt/api-produto:lasted\", '-f ./src/Dockerfile ./src') \n+                   dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n                 }                \n             }\n         }\n \n"
                },
                {
                    "date": 1676517851829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     stages { \n         stage ('Build Image') { \n             steps { \n                 script {\n-                   dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n+                   dockerapp = docker.build(\"rodspt/sigabc-backend:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n                 }                \n             }\n         }\n \n"
                }
            ],
            "date": 1676513610783,
            "name": "Commit-0",
            "content": "pipeline { \n    agent any  \n\n    stages { \n        stage ('Build Image') { \n            steps { \n                script {\n                    dockerapp = docker.build(\"rodspt/api-produto:${env.BUILD_ID}\", '-f ./src/Dockerfile ./src') \n                }                \n            }\n        }\n\n        stage ('Push Image') {\n            steps {\n                script {\n                    docker.withRegistry('https://registry.hub.docker.com', 'dockerhub') {\n                        dockerapp.push('latest')\n                        dockerapp.push(\"${env.BUILD_ID}\")\n                    }\n                }\n            }\n        }\n\n        stage ('Deploy Kubernetes') {\n            environment {\n                tag_version = \"${env.BUILD_ID}\"\n            }\n            steps {\n                withKubeConfig([credentialsId: 'kubeconfig']) {\n                    sh 'sed -i \"s/{{tag}}/$tag_version/g\" ./k8s/deployment.yaml'\n                    sh 'kubectl apply -f ./k8s/deployment.yaml'\n                }\n            }\n        }\n    }\n}"
        }
    ]
}